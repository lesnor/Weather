(this.webpackJsonpcodica=this.webpackJsonpcodica||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){},38:function(t,e,n){t.exports={Createform:"createForm_Createform__1OGYQ"}},40:function(t,e,n){t.exports={myLink:"MyLink_myLink__2ppuP"}},42:function(t,e,n){t.exports={loader:"Loader_loader__TITNl",rotate:"Loader_rotate__1T6dh"}},76:function(t,e,n){"use strict";n.r(e);var c=n(0),i=n(20),r=n.n(i),a=n(10),s=(n(27),n(28),n(15)),o=n(3),d=n(14),u=n(38),l=n.n(u),j=n(1),b=function(t){var e=t.setWeather,n=Object(c.useState)("\u0425\u0430\u0440\u044c\u043a\u043e\u0432"),i=Object(d.a)(n,2),r=i[0],a=i[1];return Object(j.jsxs)("form",{className:l.a.Createform,onSubmit:function(t){t.preventDefault(),e(r)},action:"","data-testid":"create-form",children:[Object(j.jsx)("input",{type:"text",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",value:r,onChange:function(t){a(t.target.value)}}),Object(j.jsx)("button",{"data-testid":"submit-form",children:"\u0423\u0437\u043d\u0430\u0442\u044c \u043f\u043e\u0433\u043e\u0434\u0443"})]})},p=n(11),O=n.n(p),h=n(18),f=function(t){return(JSON.parse(localStorage.getItem("cities"))||[]).find((function(e){return t===e.id}))},m=n(39),x=n.n(m),y=function(){var t=Object(h.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get(" https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=1cd9453f9b6e6661890c8dc7a011898d"));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v="FETCH_CITY_WEATHER",g="ADD_CITY_TO_LIST",_="REMOVE_CITY_FROM_LIST",I="UPDATE_CITY_INFO",C=function(t){return{type:v,cityInfo:t}},S=function(t){return function(){var e=JSON.parse(localStorage.getItem("cities"))||[];return!f(t.id)&&e.push(t),localStorage.setItem("cities",JSON.stringify(e)),{type:"SAVE_CITY_INFO"}}},N=function(t){return function(){var e=Object(h.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t).then((function(t){var e;console.log(t),n(C(t.data)),n((e=t.data,f(e.id)?{type:"ADD_CITY_TO_LIST_FAILURE"}:{type:g,cityInfo:e})),n(S(t.data))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(t){var e=new Date;e.setMinutes(e.getMinutes()+e.getTimezoneOffset()+t/60);var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];return e.getDate()+" "+n+" "+e.getHours()+"h: "+e.getMinutes()+"m: "+e.getSeconds()+"s"},T=n(40),k=n.n(T),J=function(t){var e=t.to,n=t.children,c=t.style;return Object(j.jsx)(s.b,{style:c,className:k.a.myLink,to:e,"data-testid":"my-link",children:n})},L=n(19),W=n.n(L),A=function(t){return(t-273.15).toFixed(1)},E={getCityWeather:N,updateCityInfo:function(t){return function(){var e=Object(h.a)(O.a.mark((function e(n){var c,i,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=JSON.parse(localStorage.getItem("cities")),e.next=3,y(t);case 3:i=e.sent,r=c.map((function(e){return t===e.name?i.data:e})),localStorage.setItem("cities",JSON.stringify(r)),n({type:I,cities:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},R=Object(a.b)(null,E)((function(t){var e=t.cityInfo,n=t.handleRemoveCity,c=t.updateCityInfo,i=A(e.main.temp);return Object(j.jsx)("div",{children:e?Object(j.jsxs)("div",{"data-testid":"card-wrapper",className:W()("sinoptik",{"hot-form":i>=20,"warmly-form":i<20&&i>5,"cold-form":i<=5}),children:[Object(j.jsxs)("div",{className:"sinoptik__content",children:[Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"sinoptik__result",children:["\u0412\u0440\u0435\u043c\u044f \u0441\u0435\u0439\u0447\u0430\u0441: ",w(e.timezone)]}),Object(j.jsxs)("div",{className:"sinoptik__result",children:["\u041f\u043e\u0433\u043e\u0434\u0430, ",e.name,":"," ",Object(j.jsx)("span",{"data-testid":"current-temp",children:i}),"\xb0C"]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{"data-testid":"remove",onClick:function(){return n(e.id)},className:"sinoptik__close"}),Object(j.jsx)("img",{className:"sinoptik__img",src:"http://openweathermap.org/img/w/".concat(e.weather[0].icon,".png"),alt:""})]})]}),Object(j.jsxs)("div",{className:"sinoptik__info",children:[Object(j.jsx)(J,{style:{fontWeight:"normal"},to:"/posts/".concat(e.name),children:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),Object(j.jsx)("button",{"data-testid":"update",className:W()("sinoptik__refresh-button",{"hot-button":i>=20,"warmly-button":i<20&&i>5,"cold-button":i<=5}),onClick:function(){return c(e.name)},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"})]})]}):Object(j.jsx)("h1",{children:"C\u043f\u0438\u0441\u043e\u043a \u0433\u043e\u0440\u043e\u0434\u043e\u0432 \u043f\u0443\u0441\u0442!"})})}));var D={getCityWeather:N,removeCityFromList:function(t){return function(e){var n=JSON.parse(localStorage.getItem("cities")).filter((function(e){return!(t===e.id)}));console.log(n),localStorage.setItem("cities",JSON.stringify(n)),e({type:_,cities:n})}}},F=Object(a.b)((function(t){return{cities:t.stateReducer.cities}}),D)((function(t){var e=t.getCityWeather,n=t.cities,i=t.removeCityFromList,r=Object(c.useState)([]),a=Object(d.a)(r,2),s=a[0],o=(a[1],Object(c.useState)(!1)),u=Object(d.a)(o,2),l=u[0],p=(u[1],Object(c.useState)()),O=Object(d.a)(p,2),h=O[0],f=(O[1],function(t){e(t)});return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsxs)("div",{className:"header",children:[Object(j.jsxs)("h1",{children:[Object(j.jsx)("span",{children:"S"}),"inoptik"]}),Object(j.jsx)("h2",{children:"CHOOSE A CITY"})]}),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(b,{setWeather:f}),n.map((function(t){return Object(j.jsx)("div",{className:"card",children:Object(j.jsx)(R,{handleRemoveCity:i,cityInfo:t,setWeather:f,weathers:s,isShowCard:l,isShowCity:h})},t.id)}))]})]})})),M=n(42),Y=n.n(M),H=function(){return Object(j.jsx)("div",{className:Y.a.loader,"data-testid":"loader"})},B={getCityWeather:N,fetchCityWeather:C},z=Object(a.b)((function(t){return{cityInfo:t.stateReducer.cityInfo,cities:t.stateReducer.cities}}),B)((function(t){var e,n=t.cityInfo,i=t.getCityWeather,r=Object(o.g)().name;return console.log(n),Object(c.useEffect)((function(){i(r)}),[i,r]),Object(j.jsx)("div",{children:n?Object(j.jsxs)("div",{"data-testid":"city-info",className:W()("CityInfoBody","CityInfoBody".concat(n.weather[0].main)),children:[Object(j.jsx)(J,{style:{position:"absolute",top:"15px",right:"15px"},to:"/posts",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u043e\u0441\u0442\u0430\u043c"}),Object(j.jsxs)("h1",{style:{textAlign:"center",paddingTop:"35px"},children:["\u041f\u043e\u0433\u043e\u0434\u0430, ",n.name,":"," ",A(n.main.temp)," \xb0C"]}),Object(j.jsxs)("div",{className:"cityInfo",children:[Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",n.main.pressure," \u043c\u043c \u0440\u0442. \u0441\u0442."]}),Object(j.jsxs)("div",{children:["\u041e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c: ",n.main.humidity," %"]}),Object(j.jsxs)("div",{children:["\u041e\u0431\u043b\u0430\u0447\u043d\u043e\u0441\u0442\u044c: ",n.clouds.all," %"]})]}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u0442\u0440\u0430: ",n.wind.deg,"\xb0"]}),Object(j.jsxs)("div",{children:["\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c: ",(e=n.visibility,e/1e3)," \u043a\u043c"]}),Object(j.jsxs)("div",{children:["\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0435\u0442\u0440\u0430: ",n.wind.speed," \u043c/c"]})]})]})]}):Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"200px"},children:Object(j.jsx)(H,{})})})}));var P=function(){return Object(j.jsx)(s.a,{children:Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{exact:!0,path:"/posts",children:Object(j.jsx)(F,{})}),Object(j.jsx)(o.b,{exact:!0,path:"/posts/:name",children:Object(j.jsx)(z,{})}),Object(j.jsx)(o.a,{to:"/posts"})]})})},U=n(13),V=n(43),q=n(44),G=n.n(q),Q=n(45),K=n(46),X=n(9),Z={cityInfo:null,cities:JSON.parse(localStorage.getItem("cities"))||[]},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return console.log(e),Object(X.a)(Object(X.a)({},t),{},{cityInfo:e.cityInfo});case g:return Object(X.a)(Object(X.a)({},t),{},{cities:[].concat(Object(K.a)(t.cities),[e.cityInfo])});case _:case I:return Object(X.a)(Object(X.a)({},t),{},{cities:e.cities});default:return t}},tt=Object(U.combineReducers)({stateReducer:$}),et=Object(U.createStore)(tt,Object(V.composeWithDevTools)(Object(U.applyMiddleware)(Q.a,G.a)));r.a.render(Object(j.jsx)(a.a,{store:et,children:Object(j.jsx)(P,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.0a8e3b68.chunk.js.map